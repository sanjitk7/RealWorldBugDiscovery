diff --git a/gpt_index/indices/base.py b/gpt_index/indices/base.py
index e2572bcd..efbbf3d4 100644
--- a/gpt_index/indices/base.py
+++ b/gpt_index/indices/base.py
@@ -167,6 +167,7 @@ class BaseGPTIndex(Generic[IS], ABC):
         """Insert a document."""
         nodes = self.service_context.node_parser.get_nodes_from_documents([document])
         self.insert_nodes(nodes, **insert_kwargs)
+        self.docstore.set_document_hash(document.get_doc_id(), document.get_doc_hash())
 
     @abstractmethod
     def _delete(self, doc_id: str, **delete_kwargs: Any) -> None:
diff --git a/gpt_index/llm_predictor/base.py b/gpt_index/llm_predictor/base.py
index fe48f3ab..09f2fd39 100644
--- a/gpt_index/llm_predictor/base.py
+++ b/gpt_index/llm_predictor/base.py
@@ -10,7 +10,7 @@ import openai
 from langchain import Cohere, LLMChain, OpenAI, BaseCache
 from langchain.chat_models import ChatOpenAI
 from langchain.llms import AI21
-from langchain.schema import BaseLanguageModel
+from langchain.base_language import BaseLanguageModel
 
 from gpt_index.constants import MAX_CHUNK_SIZE, NUM_OUTPUTS
 from gpt_index.prompts.base import Prompt
diff --git a/gpt_index/prompts/base.py b/gpt_index/prompts/base.py
index da45d4f3..13b6154a 100644
--- a/gpt_index/prompts/base.py
+++ b/gpt_index/prompts/base.py
@@ -6,7 +6,7 @@ from typing import Any, Dict, List, Optional, Type, TypeVar
 from langchain import BasePromptTemplate as BaseLangchainPrompt
 from langchain import PromptTemplate as LangchainPrompt
 from langchain.chains.prompt_selector import ConditionalPromptSelector
-from langchain.schema import BaseLanguageModel
+from langchain.base_language import BaseLanguageModel
 
 from gpt_index.output_parsers.base import BaseOutputParser
 from gpt_index.prompts.prompt_type import PromptType
diff --git a/tests/readers/test_mongo.py b/tests/readers/test_mongo.py
index 2538ae23..dcc34eaf 100644
--- a/tests/readers/test_mongo.py
+++ b/tests/readers/test_mongo.py
@@ -7,7 +7,7 @@ from gpt_index.readers.mongo import SimpleMongoReader
 try:
     from pymongo import MongoClient
 except ImportError:
-    MongoClient = None
+    MongoClient = None  # type: ignore
 
 
 @pytest.mark.skipif(MongoClient is None, reason="pymongo not installed")
diff --git a/tests/storage/docstore/test_mongo_docstore.py b/tests/storage/docstore/test_mongo_docstore.py
index d7ab95c2..b56e63f8 100644
--- a/tests/storage/docstore/test_mongo_docstore.py
+++ b/tests/storage/docstore/test_mongo_docstore.py
@@ -10,7 +10,7 @@ from gpt_index.storage.kvstore.mongodb_kvstore import MongoDBKVStore
 try:
     from pymongo import MongoClient
 except ImportError:
-    MongoClient = None
+    MongoClient = None  # type: ignore
 
 
 @pytest.fixture
diff --git a/tests/storage/kvstore/test_mongodb_kvstore.py b/tests/storage/kvstore/test_mongodb_kvstore.py
index f43eca40..4cfcc477 100644
--- a/tests/storage/kvstore/test_mongodb_kvstore.py
+++ b/tests/storage/kvstore/test_mongodb_kvstore.py
@@ -4,7 +4,7 @@ from gpt_index.storage.kvstore.mongodb_kvstore import MongoDBKVStore
 try:
     from pymongo import MongoClient
 except ImportError:
-    MongoClient = None
+    MongoClient = None  # type: ignore
 
 
 @pytest.fixture()
